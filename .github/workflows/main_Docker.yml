name: Build Docker Image

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # Checkout main to get docker-compose.yml and Dockerfile
      - name: 📥 Checkout Main Branch
        uses: actions/checkout@v3
        with:
          ref: main

      # Fetch Frontend branch into frontend/
      - name: 📥 Merge Frontend Branch
        run: |
          git fetch origin Frontend
          git checkout Frontend -- frontend

      # Fetch Backend branch into backend/
      - name: 📥 Merge Backend Branch
        run: |
          git fetch origin backend
          git checkout backend -- backend

      # Debug folder structure
      - name: 📁 Show Directory
        run: ls -R

      # Build Docker image
      - name: 🐳 Build Image
        run: docker build -t your-image-name .

